Version 4.1
SHEET 1 3292 868
WIRE 1072 -1056 784 -1056
WIRE 1168 -1056 1072 -1056
WIRE 1168 -1024 1168 -1056
WIRE -304 -944 -464 -944
WIRE -1776 -912 -1776 -1008
WIRE -2144 -896 -2464 -896
WIRE -2000 -896 -2064 -896
WIRE -1808 -896 -2000 -896
WIRE 784 -896 784 -1056
WIRE 1168 -896 1168 -944
WIRE -1680 -880 -1744 -880
WIRE -1552 -880 -1680 -880
WIRE -464 -880 -464 -944
WIRE -304 -880 -304 -944
WIRE 1792 -880 1792 -928
WIRE -1808 -864 -1904 -864
WIRE -1552 -864 -1552 -880
WIRE 1072 -848 1072 -1056
WIRE 1072 -816 1072 -848
WIRE -1776 -800 -1776 -848
WIRE -2144 -784 -2288 -784
WIRE -2000 -784 -2000 -896
WIRE -2000 -784 -2064 -784
WIRE 1008 -768 960 -768
WIRE 1792 -752 1792 -800
WIRE 1792 -752 1664 -752
WIRE -2464 -736 -2464 -896
WIRE -2288 -736 -2288 -784
WIRE -304 -736 -304 -800
WIRE -80 -736 -304 -736
WIRE 1664 -736 1664 -752
WIRE -1904 -720 -1904 -864
WIRE -1840 -720 -1904 -720
WIRE -1680 -720 -1680 -880
WIRE -1680 -720 -1760 -720
WIRE -464 -720 -464 -800
WIRE 144 -720 -16 -720
WIRE 272 -720 144 -720
WIRE 480 -720 336 -720
WIRE 784 -720 784 -816
WIRE 896 -720 784 -720
WIRE -1904 -704 -1904 -720
WIRE -80 -704 -128 -704
WIRE 1792 -704 1792 -752
WIRE -304 -688 -304 -736
WIRE 784 -688 784 -720
WIRE -1552 -672 -1552 -784
WIRE 960 -640 960 -672
WIRE 1072 -640 1072 -720
WIRE 1072 -640 960 -640
WIRE -128 -624 -128 -704
WIRE 0 -624 -128 -624
WIRE 144 -624 144 -720
WIRE 144 -624 64 -624
WIRE 1664 -608 1664 -656
WIRE -1904 -592 -1904 -624
WIRE -2464 -576 -2464 -656
WIRE -2288 -576 -2288 -656
WIRE 80 -496 80 -544
WIRE 480 -496 480 -720
WIRE 480 -496 192 -496
WIRE 512 -496 480 -496
WIRE 624 -480 576 -480
WIRE 784 -480 784 -624
WIRE 784 -480 624 -480
WIRE 512 -464 432 -464
WIRE 16 -448 -176 -448
WIRE -176 -432 -176 -448
WIRE 80 -368 80 -400
WIRE 192 -368 192 -496
WIRE 192 -368 80 -368
WIRE 432 -352 432 -464
WIRE 512 -352 432 -352
WIRE 624 -352 624 -480
WIRE 624 -352 576 -352
WIRE 1072 -352 1072 -640
WIRE 1232 -352 1072 -352
WIRE 80 -320 80 -368
WIRE 432 -320 432 -352
WIRE 1232 -320 1232 -352
WIRE 1232 -320 1136 -320
WIRE -176 -304 -176 -352
WIRE 1232 -304 1232 -320
WIRE 512 -256 480 -256
WIRE 656 -256 592 -256
WIRE 480 -224 480 -256
WIRE 80 -208 80 -240
WIRE 656 -176 656 -256
WIRE 672 -176 656 -176
WIRE 1136 -176 1136 -320
WIRE 1136 -176 752 -176
WIRE 1232 -160 1232 -224
WIRE 656 -128 656 -176
WIRE 656 -128 592 -128
WIRE 432 -112 432 -240
WIRE 480 -112 432 -112
WIRE 528 -112 480 -112
WIRE 656 -96 592 -96
WIRE 656 -64 656 -96
WIRE 672 -64 656 -64
WIRE 1136 -64 752 -64
WIRE 1136 -32 1136 -64
WIRE 1232 -32 1232 -80
WIRE 1232 -32 1136 -32
WIRE 480 16 480 -112
WIRE 512 16 480 16
WIRE 656 16 656 -64
WIRE 656 16 592 16
WIRE 480 112 480 16
WIRE 528 112 480 112
WIRE 656 112 656 16
WIRE 656 112 592 112
WIRE 784 160 784 -480
WIRE 1072 240 1072 -352
WIRE 1072 240 960 240
WIRE 960 272 960 240
WIRE 784 320 784 224
WIRE 880 320 784 320
WIRE 896 320 880 320
WIRE 1072 320 1072 240
WIRE 784 352 784 320
WIRE 1008 368 960 368
WIRE 784 464 784 432
WIRE 1072 464 1072 416
WIRE 1072 464 784 464
WIRE 1072 496 1072 464
WIRE 1072 608 1072 576
WIRE -128 672 -128 -624
WIRE -48 672 -128 672
WIRE 1232 672 1232 -32
WIRE 1232 672 32 672
WIRE 1232 704 1232 672
WIRE 1232 848 1232 784
FLAG 1232 848 0
FLAG 1792 -928 OP+
FLAG 1792 -704 0
FLAG -48 -688 OP+
FLAG -2464 -576 0
FLAG 1168 -896 0
FLAG -1552 -592 0
FLAG -1904 -592 0
FLAG 1072 -848 C1
FLAG 1072 464 C2
FLAG 1072 608 0
FLAG 880 320 B
FLAG 1664 -608 OP-
FLAG -48 -752 OP-
FLAG -1776 -800 OP+
FLAG -1776 -1008 OP-
FLAG -2288 -576 0
FLAG -304 -608 0
FLAG -464 -720 0
FLAG 544 -448 OP+
FLAG 544 -512 OP-
FLAG 560 -80 OP+
FLAG 560 -144 OP-
FLAG 480 -224 0
FLAG -176 -304 0
FLAG 80 -208 0
FLAG 80 -544 OP+
SYMBOL voltage 1792 -896 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 6
SYMBOL res 1216 688 R0
SYMATTR InstName Rs
SYMATTR Value 100m
SYMBOL voltage 1168 -1040 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 35 41 Left 2
SYMATTR InstName VCC
SYMATTR Value 6
SYMBOL npn 896 -768 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL voltage -2464 -752 R0
WINDOW 3 -234 52 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 -1 1m 1n 1n 20m 30m 10)
SYMATTR InstName V1
SYMBOL pnp 1008 -720 M180
SYMATTR InstName Q2
SYMATTR Value TIP36C
SYMBOL res -1568 -688 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -1568 -880 R0
SYMATTR InstName R6
SYMATTR Value 91k
SYMBOL res -2048 -912 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -2048 -800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -1744 -736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res -1888 -608 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL pnp 896 368 M180
SYMATTR InstName Q3
SYMATTR Value 2N2907
SYMBOL npn 1008 320 R0
SYMATTR InstName Q4
SYMATTR Value TIP35C
SYMBOL voltage 1232 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VBAT
SYMATTR Value 3.7
SYMBOL voltage 1072 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName -VCC
SYMATTR Value -6
SYMBOL voltage 1664 -752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 6
SYMBOL voltage -2288 -752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -129 72 Left 2
SYMATTR Value 0
SYMATTR InstName V5
SYMBOL OpAmps\\opamp2 -1776 -816 M180
SYMATTR InstName U2
SYMATTR Value OPAx188
SYMBOL res -320 -704 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -320 -896 R0
SYMATTR InstName R10
SYMATTR Value 91K
SYMBOL voltage -464 -896 R0
WINDOW 3 -234 52 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3 1m 1n 1n 20m 30m 10)
SYMATTR InstName V3
SYMBOL diode 768 160 R0
WINDOW 3 35 30 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D2
SYMBOL res 768 336 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL OpAmps\\opamp2 -48 -656 M180
SYMATTR InstName U1
SYMATTR Value LMX24_LM2902
SYMBOL cap 64 -640 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL res 48 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 9.1k
SYMBOL diode 272 -704 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 768 -688 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 1216 -320 R0
SYMATTR InstName R1
SYMATTR Value 0
SYMBOL res 768 -912 R0
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL OpAmps\\opamp2 544 -416 M180
WINDOW 3 6 88 Left 2
SYMATTR Value LMX24_LM2902
SYMATTR InstName U4
SYMBOL OpAmps\\opamp2 560 -48 R180
WINDOW 3 -104 97 Left 2
SYMATTR Value LMX24_LM2902
SYMATTR InstName U3
SYMBOL res 768 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 20K
SYMBOL res 768 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 20K
SYMBOL res 608 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 20K
SYMBOL res 608 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 20K
SYMBOL res 416 -336 R0
SYMATTR InstName R19
SYMATTR Value 1K
SYMBOL cap 576 -368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL cap 592 96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL voltage -176 -448 R0
WINDOW 3 -239 98 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 4.8 1.5m 1n 1n 20m 30m 10)
SYMATTR InstName V6
SYMBOL npn 16 -496 R0
SYMATTR InstName Q6
SYMATTR Value 2N2222
SYMBOL res 64 -336 R0
SYMATTR InstName R18
SYMATTR Value 1K
TEXT -2248 -328 Left 2 !.tran 0 5m 0 100
TEXT -2248 -288 Left 2 ;.ac dec 1000 1 100Meg
TEXT -2248 -248 Left 2 ;.dc Vref 0 0.3 10m
TEXT 2552 -928 Left 2 !.MODEL tip35c npn (\n    +IS=7.88586e-11 BF=256.257 NF=0.951481 VAF=25.9112\n    +IKF=6.91656 ISE=6.4e-12 NE=3.4 BR=4.49993\n    +NR=1.08286 VAR=4.40924 IKR=3.69854\n    +ISC=3.9e-13 NC=3.99 RB=20.929 IRB=0.1 RBM=0.135255\n    +RE=0.000998231 RC=0.0563125 XTB=0.1 XTI=1\n    +EG=1.10826 CJE=1e-07 VJE=0.421306 MJE=0.693953\n    +TF=1e-08 XTF=1.35777 VTF=1.00063 ITF=0.9994\n    +CJC=5e-10 VJC=0.400277 MJC=0.409924 XCJC=0.803124\n    +FC=0.720291 CJS=0 VJS=0.75 MJS=0.5\n    +TR=4.99888e-07 PTF=0 KF=0 AF=1)
TEXT 2552 -584 Left 2 !.MODEL tip36c pnp(\n+IS=7.88586e-11 BF=256.257 NF=0.951481 VAF=25.9112\n+IKF=6.91657 ISE=6.4e-12 NE=3.4 BR=4.49993\n+NR=1.08286 VAR=4.40924 IKR=3.69854 ISC=3.9e-13\n+NC=3.99 RB=20.929 IRB=0.1 RBM=0.135255\n+RE=0.000998231 RC=0.0563123 XTB=0.1 XTI=1\n+EG=1.10826 CJE=1e-07 VJE=0.4 MJE=0.735975\n+TF=1e-08 XTF=1.35769 VTF=1 ITF=0.99952\n+CJC=5e-10 VJC=0.400257 MJC=0.409987 XCJC=0.80312\n+FC=0.724857 CJS=0 VJS=0.75 MJS=0.5\n+TR=2.03153e-07 PTF=0 KF=0 AF=1)
TEXT 2560 -992 Left 2 !.inc OPAx188.lib
TEXT 2536 -184 Left 2 !.model D3 D(Ron=0 Roff=1Meg Vfwd=0.7 Vrev=4.7)
TEXT 2568 -1064 Left 2 !.inc lmx24_lm2902.lib
