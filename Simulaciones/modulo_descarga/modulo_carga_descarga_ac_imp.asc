Version 4.1
SHEET 1 3292 700
WIRE 1072 -896 784 -896
WIRE 1168 -896 1072 -896
WIRE -304 -880 -464 -880
WIRE 1792 -880 1792 -928
WIRE 1168 -864 1168 -896
WIRE -992 -816 -992 -912
WIRE -464 -816 -464 -880
WIRE -304 -816 -304 -880
WIRE -1360 -800 -1680 -800
WIRE -1216 -800 -1280 -800
WIRE -1024 -800 -1216 -800
WIRE -896 -784 -960 -784
WIRE -768 -784 -896 -784
WIRE -1024 -768 -1120 -768
WIRE -768 -768 -768 -784
WIRE 784 -768 784 -896
WIRE 1792 -752 1792 -800
WIRE 1792 -752 1664 -752
WIRE 1168 -736 1168 -784
WIRE 1664 -736 1664 -752
WIRE -992 -704 -992 -752
WIRE 1792 -704 1792 -752
WIRE -1360 -688 -1504 -688
WIRE -1216 -688 -1216 -800
WIRE -1216 -688 -1280 -688
WIRE 1072 -688 1072 -896
WIRE -304 -672 -304 -736
WIRE -80 -672 -304 -672
WIRE -464 -656 -464 -736
WIRE 144 -656 -16 -656
WIRE 736 -656 144 -656
WIRE 1072 -656 1072 -688
WIRE -1680 -640 -1680 -800
WIRE -1504 -640 -1504 -688
WIRE -80 -640 -128 -640
WIRE -1120 -624 -1120 -768
WIRE -1056 -624 -1120 -624
WIRE -896 -624 -896 -784
WIRE -896 -624 -976 -624
WIRE -304 -624 -304 -672
WIRE -1120 -608 -1120 -624
WIRE 1008 -608 960 -608
WIRE 1664 -608 1664 -656
WIRE -768 -576 -768 -688
WIRE -128 -560 -128 -640
WIRE 0 -560 -128 -560
WIRE 144 -560 144 -656
WIRE 144 -560 64 -560
WIRE 784 -560 784 -688
WIRE 896 -560 784 -560
WIRE 672 -528 576 -528
WIRE 784 -528 784 -560
WIRE 288 -512 192 -512
WIRE -1120 -496 -1120 -528
WIRE 672 -496 672 -528
WIRE -1680 -480 -1680 -560
WIRE -1504 -480 -1504 -560
WIRE 288 -480 288 -512
WIRE 576 -480 576 -528
WIRE 960 -480 960 -512
WIRE 1072 -480 1072 -560
WIRE 1072 -480 960 -480
WIRE 192 -464 192 -512
WIRE 736 -416 736 -656
WIRE 784 -416 784 -464
WIRE 784 -416 736 -416
WIRE 576 -352 576 -400
WIRE 576 -352 496 -352
WIRE 608 -352 576 -352
WIRE 1072 -352 1072 -480
WIRE 1072 -352 688 -352
WIRE 1232 -352 1072 -352
WIRE 192 -336 192 -384
WIRE 192 -336 112 -336
WIRE 224 -336 192 -336
WIRE 400 -336 304 -336
WIRE 432 -336 400 -336
WIRE -128 -320 -128 -560
WIRE -112 -320 -128 -320
WIRE 16 -320 -48 -320
WIRE 48 -320 16 -320
WIRE 576 -320 496 -320
WIRE 192 -304 112 -304
WIRE 576 -240 576 -320
WIRE 608 -240 576 -240
WIRE 192 -224 192 -304
WIRE 224 -224 192 -224
WIRE 1232 -224 1232 -352
WIRE 400 -208 400 -336
WIRE 432 -208 400 -208
WIRE 576 -208 576 -240
WIRE 576 -208 512 -208
WIRE 16 -192 16 -320
WIRE 48 -192 16 -192
WIRE 192 -192 192 -224
WIRE 192 -192 128 -192
WIRE 784 -192 784 -416
WIRE 1072 -176 1072 -352
WIRE 1072 -176 960 -176
WIRE 304 -160 304 -224
WIRE 960 -144 960 -176
WIRE 400 -112 400 -208
WIRE 448 -112 400 -112
WIRE 576 -112 576 -208
WIRE 576 -112 512 -112
WIRE 16 -96 16 -192
WIRE 64 -96 16 -96
WIRE 192 -96 192 -192
WIRE 192 -96 128 -96
WIRE 784 -96 784 -128
WIRE 880 -96 784 -96
WIRE 896 -96 880 -96
WIRE 1072 -96 1072 -176
WIRE 1008 -48 960 -48
WIRE 1232 -48 1232 -144
WIRE 304 -32 304 -80
WIRE 784 48 784 -16
WIRE 1072 48 1072 0
WIRE 1072 48 784 48
WIRE 1072 80 1072 48
WIRE 1072 192 1072 160
WIRE -128 272 -128 -320
WIRE -48 272 -128 272
WIRE 688 272 688 -240
WIRE 688 272 32 272
WIRE 1232 272 1232 32
WIRE 1232 272 688 272
WIRE 1232 304 1232 272
WIRE 1232 448 1232 384
FLAG 1232 448 0
FLAG 1792 -928 OP+
FLAG 1792 -704 0
FLAG -48 -624 OP+
FLAG -1680 -480 0
FLAG 1168 -736 0
FLAG -768 -496 0
FLAG -1120 -496 0
FLAG 1072 -688 C1
FLAG 1072 48 C2
FLAG 1072 192 0
FLAG 880 -96 B
FLAG 1664 -608 OP-
FLAG -48 -688 OP-
FLAG -992 -704 OP+
FLAG -992 -912 OP-
FLAG -1504 -480 0
FLAG -304 -544 0
FLAG -464 -656 0
FLAG 304 -32 0
FLAG 80 -352 OP-
FLAG 80 -288 OP+
FLAG 288 -480 0
FLAG 464 -368 OP-
FLAG 464 -304 OP+
FLAG 672 -496 0
SYMBOL voltage 1792 -896 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 6
SYMBOL res 1216 288 R0
SYMATTR InstName Rs
SYMATTR Value 100m
SYMBOL voltage 1168 -880 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 0 35 41 Left 2
SYMATTR InstName VCC
SYMATTR Value 6
SYMBOL npn 896 -608 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL voltage -1680 -656 R0
WINDOW 3 -234 52 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 -1 1m 1n 1n 20m 30m 10)
SYMATTR InstName V1
SYMBOL pnp 1008 -560 M180
SYMATTR InstName Q2
SYMATTR Value TIP36C
SYMBOL res -784 -592 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -784 -784 R0
SYMATTR InstName R6
SYMATTR Value 91k
SYMBOL res -1264 -816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -1264 -704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -960 -640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res -1104 -512 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL pnp 896 -48 M180
SYMATTR InstName Q3
SYMATTR Value 2N2907
SYMBOL npn 1008 -96 R0
SYMATTR InstName Q4
SYMATTR Value TIP35C
SYMBOL voltage 1232 -64 R0
SYMATTR InstName VBAT
SYMATTR Value V=if(time>1m,time*2000,0)
SYMATTR Prefix B
SYMBOL voltage 1072 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName -VCC
SYMATTR Value -6
SYMBOL voltage 1664 -752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 6
SYMBOL voltage -1504 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -129 72 Left 2
SYMATTR Value 0
SYMATTR InstName V5
SYMBOL OpAmps\\opamp2 -992 -720 M180
SYMATTR InstName U2
SYMATTR Value OPAx188
SYMBOL res -320 -640 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -320 -832 R0
SYMATTR InstName R10
SYMATTR Value 91K
SYMBOL voltage -464 -832 R0
WINDOW 3 -234 52 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3 1m 1n 1n 20m 30m 10)
SYMATTR InstName V3
SYMBOL diode 768 -528 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode 768 -192 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 768 -784 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 768 -112 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL OpAmps\\opamp2 -48 -592 M180
SYMATTR InstName U1
SYMATTR Value OPAx188
SYMBOL cap 64 -576 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL res 48 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 9.1k
SYMBOL diode -48 -336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL voltage 304 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 2.05
SYMBOL OpAmps\\opamp2 80 -256 R180
WINDOW 3 -59 153 Left 2
SYMATTR Value OPAx188
SYMATTR InstName U3
SYMBOL res 144 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 100k
SYMBOL res 320 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL res 320 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL res 176 -480 R0
SYMATTR InstName R19
SYMATTR Value 100k
SYMBOL cap 128 -112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL OpAmps\\opamp2 464 -272 R180
WINDOW 3 -59 153 Left 2
SYMATTR Value OPAx188
SYMATTR InstName U4
SYMBOL res 528 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL res 704 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 20k
SYMBOL res 704 -368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 20k
SYMBOL res 560 -496 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL cap 512 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL res 1216 -240 R0
SYMATTR InstName R20
SYMATTR Value 68m
TEXT 2560 -1032 Left 2 !.inc lmx58_lm2904.lib
TEXT -1464 -232 Left 2 !.tran 0 5m 0 100
TEXT -1464 -192 Left 2 ;.ac dec 1000 1 100Meg
TEXT -1464 -152 Left 2 ;.dc Vref 0 0.3 10m
TEXT 2552 -928 Left 2 !.MODEL tip35c npn (\n    +IS=7.88586e-11 BF=256.257 NF=0.951481 VAF=25.9112\n    +IKF=6.91656 ISE=6.4e-12 NE=3.4 BR=4.49993\n    +NR=1.08286 VAR=4.40924 IKR=3.69854\n    +ISC=3.9e-13 NC=3.99 RB=20.929 IRB=0.1 RBM=0.135255\n    +RE=0.000998231 RC=0.0563125 XTB=0.1 XTI=1\n    +EG=1.10826 CJE=1e-07 VJE=0.421306 MJE=0.693953\n    +TF=1e-08 XTF=1.35777 VTF=1.00063 ITF=0.9994\n    +CJC=5e-10 VJC=0.400277 MJC=0.409924 XCJC=0.803124\n    +FC=0.720291 CJS=0 VJS=0.75 MJS=0.5\n    +TR=4.99888e-07 PTF=0 KF=0 AF=1)
TEXT 2552 -584 Left 2 !.MODEL tip36c pnp(\n+IS=7.88586e-11 BF=256.257 NF=0.951481 VAF=25.9112\n+IKF=6.91657 ISE=6.4e-12 NE=3.4 BR=4.49993\n+NR=1.08286 VAR=4.40924 IKR=3.69854 ISC=3.9e-13\n+NC=3.99 RB=20.929 IRB=0.1 RBM=0.135255\n+RE=0.000998231 RC=0.0563123 XTB=0.1 XTI=1\n+EG=1.10826 CJE=1e-07 VJE=0.4 MJE=0.735975\n+TF=1e-08 XTF=1.35769 VTF=1 ITF=0.99952\n+CJC=5e-10 VJC=0.400257 MJC=0.409987 XCJC=0.80312\n+FC=0.724857 CJS=0 VJS=0.75 MJS=0.5\n+TR=2.03153e-07 PTF=0 KF=0 AF=1)
TEXT 2560 -992 Left 2 !.inc OPAx188.lib
TEXT 2536 -184 Left 2 !.model D4V1 D(Ron=0 Roff=1Meg Vfwd=0.7 Vrev=4.1)
